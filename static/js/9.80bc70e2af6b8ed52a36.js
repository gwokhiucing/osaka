webpackJsonp([9],{OZEW:function(t,e,a){var n=a("p0o0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("22131306",n,!0,{})},p0o0:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.main-page .title-wrap[data-v-3840251a] {\n  margin-bottom: 15px;\n}\n.main-page .content-wrap .table-top[data-v-3840251a] {\n  height: 54px;\n}\n.main-page .content-wrap .table-top .table-top-l[data-v-3840251a] {\n    float: left;\n    margin: 16px 0 10px;\n}\n.main-page .content-wrap .table-top .table-top-l .handle-btn[data-v-3840251a] {\n      float: left;\n      padding: 6px 15px;\n      border: 1px solid #3a78ff;\n      color: #3a78ff;\n      border-radius: 3px;\n      cursor: pointer;\n}\n.main-page .content-wrap .table-top .table-top-l .handle-btn[data-v-3840251a]:hover {\n        background: rgba(0, 85, 255, 0.15);\n}\n.main-page .content-wrap .table-top .table-top-r[data-v-3840251a] {\n    float: right;\n    margin: 16px 0 10px;\n}\n",""])},szia:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("uUlv"),r={name:"message",components:{},data:function(){return{query:{readFlag:"0",context:"",current:1,size:10,userId:this.userId},tableList:{}}},computed:s()({},Object(i.b)(["user"]),{userId:function(){return this.user.id||1}}),created:function(){this.getList()},methods:{rowClick:function(t,e,a){var n=this,s={userId:this.userId,id:t.id};this.$api.message.read(s).then(function(e){0==e.code?n.go("page",{id:t.id}):n.$gidMessage(e.msg)})},go:function(t,e){this.$router.push({path:t,query:e})},handleClick:function(t,e){this.getList()},getList:function(t){var e=this;this.query.current=t?this.query.current:1,this.$api.message.getList(this.query).then(function(t){0==t.code?e.tableList=t.data:e.$gidMessage(t.msg)})},readAll:function(){var t=this,e={userId:this.userId};this.$api.message.readAll(e).then(function(e){0==e.code?t.getList():t.$gidMessage(e.msg)})},handleCurrentChange:function(t){this.query.current=Number(t),this.getList(!0)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page message-page"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"bread_crumb"},[t._v("消息中心")]),t._v(" "),a("div",{staticClass:"tab"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.query.readFlag,callback:function(e){t.$set(t.query,"readFlag",e)},expression:"query.readFlag"}},[a("el-tab-pane",{attrs:{label:"未读消息",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已读消息",name:"1"}})],1)],1)]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"table-top"},["0"==t.query.readFlag?a("div",{staticClass:"table-top-l"},[a("span",{staticClass:"handle-btn",on:{click:function(e){t.readAll()}}},[t._v("全部标记为已读")])]):t._e(),t._v(" "),a("div",{staticClass:"table-top-r"},[a("div",{staticClass:"search-box fr"},[a("i",{staticClass:"btn-search",on:{click:function(e){t.getList()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.query.context,expression:"query.context",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入关键字"},domProps:{value:t.query.context},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getList()},input:function(e){e.target.composing||t.$set(t.query,"context",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])]),t._v(" "),a("div",{staticClass:"gmop-table"},[a("el-table",{attrs:{data:t.tableList.records,border:""},on:{"row-click":t.rowClick}},[t._v("\n                >\n                "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"context",label:"消息","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发送时间","min-width":"100"}})],1)],1),t._v(" "),t.tableList.total?a("div",{staticClass:"page-line"},[a("el-pagination",{staticClass:"page-box",attrs:{background:"","page-size":t.tableList.size,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next,slot,jumper",total:t.tableList.total},on:{"current-change":t.handleCurrentChange}},[a("span",{staticClass:"page-info"},[t._v("共"+t._s(Math.ceil(t.tableList.total/t.tableList.size))+"页共"+t._s(t.tableList.total)+"条信息")])])],1):t._e()])])},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(t){a("OZEW")},"data-v-3840251a",null);e.default=o.exports}});